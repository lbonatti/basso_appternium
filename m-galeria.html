
<div data-role="page" id="m3-g">
    <div class="page-header" >
        <a href="#" class="open-menu"></a>
        <h1>Galer√≠a Steel Frame</h1>
        <a  class="page-back"></a>
    </div>
    <div class="page-content">

		<ul class="tabs">
			<li class="tab-link" data-tab="Interiores">Interiores</li>
			<li class="tab-link current" data-tab="Exteriores">Exteriores</li>
			<li class="tab-link" data-tab="Aberturas">Aberturas</li>
		</ul>

		<div id="Interiores" class="tab-content"></div>
		<div id="Exteriores" class="tab-content current"></div>
		<div id="Aberturas" class="tab-content"></div>
    </div>

    <script>
		$(document).ready(function() {
			contSync = $('#syncOverlay');
			contSyncMessage = $('#syncOverlay ul');
			contSyncMessage.html('<li class="first"><p>Cargando &nbsp;&nbsp;&nbsp;&nbsp;<img src="img/ajax-loader.gif" /> </p></li>');
			contSync.fadeIn(2000);

			setTimeout(function (){
				updateGaleria($('ul.tabs li.current').attr('data-tab'));
			}, 2000);


			$('ul.tabs li').click(function() {
				contSync.fadeIn(1000);

				var $tab = $(this);
				var tab_id = $tab.attr('data-tab');

				$('#'+tab_id).html('');
				updateGaleria(tab_id);

				$('ul.tabs li').removeClass('current');
				$('.tab-content').removeClass('current');

				$tab.addClass('current');
				$("#"+tab_id).addClass('current');
			});

			function updateGaleria(id)
			{
				$.ajax({
					async: false,
					url: backend_url + "/galerias/getGalerias",
					data: {
						nombre: id
					},
					success: function(result) {
						$.each(result.Default, function(key, value) {
							var $galeria = value.Galeria;
							$('#'+id).append('<div class="img-content"><img src="'+backend_url+'/app/webroot/uploads/galerias/'+$galeria.imagen+'" /><div class="infoImg"><span>'+$galeria.titulo+'<br/><span>'+$galeria.descripcion+'</span></span></div></div>');
						});
					}
				});

				contSync.fadeOut();
			}

		})
    </script>
</div>
